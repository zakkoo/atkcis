@page
@model Atk.Cis.Web.Pages.Admin.DataModel
@{
    ViewData["Title"] = "Admin - Data";
}

<h1>Admin Data</h1>

<p>Enter the admin password to fetch users and session data.</p>

<form method="post">
    <label for="password">Admin password</label>
    <input id="password" name="Password" type="password" />
    <button type="submit">Load data</button>
</form>

<p>@Model.StatusMessage</p>

@if (Model.Users.Count > 0)
{
    <h2>Users</h2>
    <table>
        <thead>
            <tr>
                <th>First name</th>
                <th>Last name</th>
                <th>Birthday</th>
                <th>Code</th>
            </tr>
        </thead>
        <tbody>
        @foreach (var user in Model.Users)
        {
            <tr>
                <td>@user.FirstName</td>
                <td>@user.LastName</td>
                <td>@user.Birthday?.ToString("dd.MM.yyyy")</td>
                <td>@user.Code</td>
            </tr>
        }
        </tbody>
    </table>
}

@if (Model.UserSessions.Count > 0)
{
    <h2>User Sessions</h2>
    <table>
        <thead>
            <tr>
                <th>Attakkee</th>
                <th>Opened at</th>
                <th>Closed at</th>
                <th>Closed by</th>
                <th>Duration</th>
            </tr>
        </thead>
        <tbody>
        @foreach (var session in Model.UserSessions)
        {
            <tr>
                <td>@session.UserDisplayName</td>
                <td>@session.OpenedAt</td>
                <td>@session.ClosedAt</td>
                <td>@session.ClosedBy</td>
                <td>@session.Duration</td>
            </tr>
        }
        </tbody>
    </table>
}
